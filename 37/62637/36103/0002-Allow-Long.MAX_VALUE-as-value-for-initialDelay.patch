From 2311bebfbbcae8c4ce2873713926c8dcd753234c Mon Sep 17 00:00:00 2001
From: Felix Schumacher <felix.schumacher@internetallee.de>
Date: Mon, 20 Aug 2018 17:33:56 +0200
Subject: [PATCH 2/2] Allow Long.MAX_VALUE as value for initialDelay

---
 src/core/org/apache/jmeter/timers/TimerService.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/core/org/apache/jmeter/timers/TimerService.java b/src/core/org/apache/jmeter/timers/TimerService.java
index c9447fc37..15d7df9fd 100644
--- a/src/core/org/apache/jmeter/timers/TimerService.java
+++ b/src/core/org/apache/jmeter/timers/TimerService.java
@@ -65,7 +65,7 @@ public class TimerService {
     public long adjustDelay(final long initialDelay, long endTime) {
         if (endTime > 0) {
             long now = System.currentTimeMillis();
-            if(now + initialDelay > endTime) {
+            if (initialDelay > endTime - now) {
                 return endTime - now;
             }
         }
-- 
2.17.1

