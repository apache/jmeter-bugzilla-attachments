 .../apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java   | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java
index 043fad3ee..cc8966cb3 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java
@@ -47,6 +47,8 @@ import javax.security.auth.Subject;
 
 import org.apache.commons.lang3.StringUtils;
 import org.apache.commons.lang3.tuple.Pair;
+import org.apache.commons.codec.DecoderException;
+import org.apache.commons.codec.net.URLCodec;
 import org.apache.http.Header;
 import org.apache.http.HttpClientConnection;
 import org.apache.http.HttpConnectionMetrics;
@@ -1687,8 +1689,16 @@ public class HTTPHC4Impl extends HTTPHCAbstractImpl {
                 // Must decode the value now, so that when the
                 // httpclient encodes it, we end up with the same value
                 // as the user had entered.
-                parameterName = URLDecoder.decode(parameterName, urlContentEncoding);
-                parameterValue = URLDecoder.decode(parameterValue, urlContentEncoding);
+                try {
+                    URLCodec urlCodec = new URLCodec(contentEncoding);
+                    //parameterName = URLDecoder.decode(parameterName, urlContentEncoding);
+                    parameterName = urlCodec.decode(parameterName, urlContentEncoding);
+                    //parameterValue = URLDecoder.decode(parameterValue, urlContentEncoding);
+                    parameterValue = urlCodec.decode(parameterValue,urlContentEncoding);
+                } catch (DecoderException e) {
+                    log.error(contentEncoding + " exception in encoding!");
+                    throw new Error(e.toString(), e);
+                }
             }
             // Add the parameter, httpclient will urlencode it
             nvps.add(new BasicNameValuePair(parameterName, parameterValue));
