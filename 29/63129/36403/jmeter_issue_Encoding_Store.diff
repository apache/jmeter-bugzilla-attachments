 .../org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java  | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java b/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java
index a8915c427..fbebbd399 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java
@@ -24,6 +24,7 @@ import java.io.StringReader;
 import java.net.MalformedURLException;
 import java.net.URL;
 import java.util.Map;
+import java.util.ArrayList;
 
 import javax.xml.parsers.ParserConfigurationException;
 import javax.xml.parsers.SAXParser;
@@ -389,6 +390,9 @@ public class DefaultSamplerCreator extends AbstractSamplerCreator {
             if (pageEncodings != null) {
                 synchronized (pageEncodings) {
                     contentEncoding = pageEncodings.get(urlWithoutQuery);
+                    if(contentEncoding == null && pageEncodings.size()>0) {
+                        contentEncoding = new ArrayList<String>(pageEncodings.values()).get(0);
+                    }
                 }
             }
             // Check if we know the encoding of the form
